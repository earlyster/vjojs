(function(q){function I(f,G){function p(a,b,c){this._needs=[];this._protos=this._props=null;this._satisfies=[];this._mixins=[];this._inherits=[];this._inits=this._scopeForGlobals=this._globals=null;this._expects=[];this._completed=!1;this._isInner=a?!1:!0;this._name=a;this._kind=b;this._options={autoConstruct:!0};this._isMetaType=!1;this.init(c);this.setup()}function x(a){function b(a,b,h){if(b&&"object"==typeof b){h=!0;for(var l in b)h=!1,Q[l]||(a[l]=b[l]);return h}}this.vj$={_vjType:"mtype",_class:a,
_meta:{}};this._props=null;this._protos={};this._expects="";this._satisfiers=[];this.needs=function(){return m.needs.apply(this,arguments)};this.props=function(a){var d=this._props||{};b(d,a,this.vj$)||this._props||(this._props=d);return this};this.protos=function(a){if(a&&a.constructs)throw"mtype cannot have constructs block";b(this._protos,a,this.vj$);return this};this.expects=function(a){this._expects=f.getType(a);return this};this.satisfies=function(a){var b=[],b=a instanceof Array?a:[a];w(b,
function(a,b,c){b=z(a);this.needs(b);this._satisfiers.push(a)},this);return this};this.endType=function(){this.vj$._class&&C.load(this.vj$._class);return this};return this}function v(a,b){return a&&a.vj$&&a.vj$._vjType&&(A(a)||"mtype"===a.vj$._vjType&&!b)?!0:!1}function q(a,b){for(var c=a._satisfied,d=0;d<c.length;d++){var h;a:{h=b;var l=c[d];if(h===l)h=!0;else{var k=p.getById(l.vj$._meta._metaId),l=void 0;if(k&&(l=k._inherits))for(k=0;k<l.length;k++){var D=z(l[k]);if(h===f.getType(D)){h=!0;break a}}h=
!1}}if(h)return!0}return!1}function B(a,b,c){if(!a)return null;var d=E[a];if(d)return d;var d=a.split("."),h=d.length;if(b)d={pkg:{className:d[h-1]}};else{(b=c)||(b="vjo"==d[0]?R:this);for(c=0;c<h-1;c++){var l=d[c],f=b[l];f||(b[l]=f={});b=f}d={pkg:b,className:0<h?d[h-1]:""}}return E[a]=d}function y(a){var b=E[a];b&&delete b.pkg[b.className];a=a.split(".");var c=a.length,b=[],d="vjo"==a[0]?R:this;b[0]=d;for(var h=0;h<c-1;h++)d=d[a[h]],b[h+1]=d;for(h=b.length-1;0<h;h--){var c=!0,l;for(l in b[h])if("undefined"!=
l){c=!1;break}c&&(b[h-1]==this?eval("delete names[i-1]"):delete b[h-1][a[h-1]])}}function e(a,b){return a.apply(this,b)}function r(){if(!A(f.Enum)){var a=f.ctype("vjo.Enum").props({from:function(){if(0==arguments.length||2<arguments.length)return this._nativeValueOf.apply(this,arguments);var a=arguments[0];if(2==arguments.length){if(a=arguments[1]){var c=arguments[0];try{for(var d=c.getName();0<d.indexOf("$");)d=d.replace("$",".");var h=eval(d);if(h[a])return h[a]}catch(l){}}throw"No enum const "+
arguments[0].getName()+"."+a;}if(this[a])return this[a];throw"No enum const "+a;}}).protos({_name:null,_ord:-1,constructs:function(){throw"cannot instantiate 'vjo.Enum'";},name:function(){return this._name},ordinal:function(){return this._ord},compareTo:function(a){if(null==a)throw"compare to Etype value cannot be null";return this.ordinal()-a.ordinal()},equals:function(a){return this===a},getDeclaringClass:function(){return this.getClass()}}).endType();a._nativeValueOf=a.valueOf;a.valueOf=f.Enum.from;
N["vjo.Enum"]=!0;S["vjo.Enum"]=!0}}function J(){var a=clz=this.vj$._class,b=a.lastIndexOf(".");-1!=b&&(clz=a.substring(b+1));return this.vj$[clz]?this.vj$[clz].clazz:null}function H(a){if(a._class){a=a._meta;if(a.s_inners)for(var b in a.s_inners){if("etype"==a.s_inners[b].vj$._vjType)for(var c=0;c<a.s_inners[b]._enums.length;c++)a.s_inners[b]._enums[c].vj$=a.s_inners[b].vj$,H(a.s_inners[b]._enums[c].vj$);H(a.s_inners[b].vj$)}if(a._inners)for(b in a._inners){if("etype"==a._inners[b].vj$._vjType)for(a._inners[b].vj$._class||
(a._inners[b].clazz._name=a._inners[b].vj$._class=a._class+"."+b),c=0;c<a._inners[b]._enums.length;c++)a._inners[b]._enums[c].vj$=a._inners[b].vj$,H(a._inners[b]._enums[c].vj$);H(a._inners[b].vj$)}}}function u(a,b){for(var c in b){var d=b[c];void 0!==d&&(a[c]=d)}b.toString!=Object.prototype.toString&&(a.toString=b.toString)}function w(a,b,c){if(a){if(f.isArray(a))for(var d=0,h=a.length;d<h&&!1!==b.call(c,a[d],d,a);d++);else for(d in a)if(!1===b.call(c,a[d],d,a))break;return a}}function F(a,b,c){var d=
{};u(d,a);b&&c&&(delete d._meta,u(d,c.vj$),d[b]=c);return d}function I(a,b){w(a,function(a,b){if("type"!=b&&v(a,!0)){if(this[b]&&this[b]!==a)throw b+" is already defined in the current namespace";this[b]=a}},b)}function P(a){if(!a)return!0;if(-1==a.indexOf("."))return!1;for(;0<(i=a.lastIndexOf("."));)if(a=a.substring(0,i),E[a])return!0;return!1}function A(a){return"function"==typeof a}function z(a){if("string"!=typeof a)return a;var b=a.indexOf("<");if(0<b){var c=a.indexOf(" ");0<c&&c<b&&(b=c);a=
a.substring(0,b)}return a}var E={},R=G,K=[];u(f,{_v:1.5,_hiddenTypes:{},loader:{async:!0,load:function(){}},isArray:function(a){return a?a.constructor==Array||"object"==typeof a&&a.join&&a.splice:!1},getType:function(a,b){if(a){a=z(a);var c=a.lastIndexOf("$")+1,d=a.lastIndexOf(".")+1,d=(d=c||d)?a.substring(d):a;a=c?a.substring(0,c-1)+"."+d:a;c=E[a];if(!b&&!c){if(c=f.loader.load(a))return c;c=E[a]}if(c)return c.pkg[d]}},mixin:function(a,b){var c=this.getType(a);if(c&&c.vj$&&"mtype"===c.vj$._vjType){if(c._props)throw"cannot mixin static props to an instance";
u(b,c._protos)}},hitch:function(a,b,c){if(!A(b)){var d=b;b=a;a=d}return function(){return b.apply(c&&this!=window?this:a,arguments)}},curry:function(a){var b=Array.prototype.slice,c=b.call(arguments,1);return function(){return a.apply(this,c.concat(b.apply(arguments)))}},bind:function(a,b){"string"==typeof b&&(b=a[b]);var c=Array.prototype.slice,d=c.call(arguments,2);return function(){return b.apply(a,d.concat(c.apply(arguments)))}},create:function(a,b){var c=document.createElement(a);"TEXTAREA"==
c.tagName?c.value=b:c.innerHTML=b;return c},make:function(a,b){var c=arguments,d=c.length,h=A(b)&&b.vj$?b:this.getType(b),l={};if(2>d||!h)throw"context and valid type are required";w(a.vj$,function(a,b){A(a)&&a.vj$&&a.vj$._vjType&&(this[b]=a)},l);var k,D=Array.prototype.slice.call(c,2,d);return{protos:function(a){k=a;return this},endType:function(){var b=f.ctype(),c=h.vj$._vjType;if("itype"===c)b.satisfies(h);else if("ctype"===c)(c=p.get(h))&&!c._completed&&c.complete(),b.inherits(f.getType(h.vj$._class));
else throw"incompatible anonomyous type";b.protos(k);b.complete();b=b.endType();c=m.createNoConstruct(b);c.vj$=b.vj$;u(c.vj$,l);(function(){this.base&&this.base.apply(this,arguments)}).apply(c,D);c.base&&c._getBase&&(b=m.tmpFunc,b.prototype=c._getBase(),c.base=new b,c.base._parent=c);c.vj$.parent=h._outer||a;c.vj$.outer=h._outer;k&&k.constructs&&k.constructs.apply(c);return c}}},needs:function(a,b){a&&!E[a]&&(B(a),f.loader.load(a))},createArray:function(a,b){var c=[];if(1<arguments.length)for(var d=
0;d<b;d++)if(2<arguments.length){for(var h=[a],l=2;l<arguments.length;l++)h[h.length]=arguments[l];c[d]=f.createArray.apply(this,h)}else c[d]=a;return c},isInstanceOf:function(a,b){if(null===a)return!1;var c=v(b);if(!c||c&&"itype"!=b.vj$._vjType)return a instanceof b;if(!a.vj$)return!1;c=a.getClass();if(q(c,b))return!0;for(var c=c.getName(),d;;)if(c=p.getById(c))if(c=c._inherits,1==c.length){c=c[0];d=f.getType(c);if(!d)break;if(q(d.clazz,b))return!0}else break;else break;return!1},meta:{_list:{},
load:function(a,b){this._list[a+"__rtti"]=b},get:function(a){return this._list[a+"__rtti"]},has:function(a){return this._list[a+"__rtti"]?!0:!1}}});f.NEEDS_IMPL=function(){throw"needs implementation";};f.Object=function(){this.vj$={_class:"vjo.Object",_vjType:"ctype",Object:f.Object,_meta:{}}};f.Object.prototype={_hashCode:-1,getClass:J,hashCode:function(){-1==this._hashCode&&(this._hashCode=++f.Object._hashCounter);return this._hashCode},equals:function(a){return this===a},toString:function(){return this.getClass().getName()+
"@"+this.hashCode().toString(16)}};u(f.Object,{vj$:{_class:"vjo.Object",_vjType:"ctype",Object:f.Object,_meta:{}},_hashCounter:0,isInstance:function(a){return f.isInstanceOf(a,this)}});f.Class=function(a,b){this._name=a;this._type=b||"ctype";this._satisfied=[];this.vj$={_class:"vjo.Class",_vjType:"ctype",Class:f.Class,_meta:{}}};f.Class.prototype=new f.Object;u(f.Class.prototype,{getName:function(){var a=this._name;return a?a:null},getSimpleName:function(){var a=this.getName(),b=a.lastIndexOf(".");
-1!=b&&(a=a.substring(b+1))&&(b=a.lastIndexOf("$"),0<b&&(a=a.substring(b+1)));return a},getPackageName:function(){var a=this.getName();if(null!=a){var b=a.lastIndexOf(".");if(0<=b)return a.substring(0,b)}return""},isInterface:function(){return"itype"===this._type},isInstance:function(a){var b=f.getType(this.getName());return b?f.isInstanceOf(a,b):!1},toString:function(){return(this.isInterface()?"interface ":"class ")+this.getName()},getClass:J,_rtti:null,_metaloaded:!1,getMeta:function(){if(null==
this._rtti){if(this._metaloaded)throw"Metadata Not Available Exception";var a=f.meta.get(this._name);if(a)this._rtti=new f.TypeMetadata(a()),this._metaloaded=!0;else throw"Metadata Not Available Exception";}return this._rtti},getConstructors:function(){return this.getMeta().getConstructors()},getFields:function(){return this.getMeta().getFields()},getDeclaredFields:function(){return this.getMeta().getDeclaredFields()},getMethods:function(){return this.getMeta().getMethods()},getDeclaredMethods:function(){return this.getMeta().getDeclaredMethods()},
getModifiers:function(){return this.getMeta().getModifiers()},getAnnotations:function(){return this.getMeta().getAnnotations()},getInterfaces:function(){return this.getMeta().getInterfaces()},getVjoType:function(){return f.getType(this.getName())}});u(f.Class,{create:function(a,b){if(!a)return new f.Class(a,b?b:"ctype");var c=K[a];c||(K[a]=c=new f.Class(a,b?b:"ctype"));return c}});u(f.Class,{forName:function(a){try{var b=eval(a);if(b&&b.clazz)return b.clazz}catch(c){}throw"Type not found for '"+a+
"'";},isInstance:function(a){return f.isInstanceOf(a,f.Class)},clazz:f.Class.create("vjo.Class")});f.Object.clazz=f.Class.create("vjo.Object");f.obj=function(a,b){if(!a)throw"Invalid type name";if(!b)return null;var c,d="Invalid type '"+a+"'.";try{c=eval(a)}catch(l){throw d;}if(!c)return d;c=new c;for(var h in b)c[h]=b[h];return c};f.findType=function(a,b){for(var c=a;;){if(null!=c.clazz.meta&&null!=c.clazz.meta[b])return c.clazz.meta[b];if(c==a.prototype.constructor)break;else c=a.prototype.constructor}};
var C=function(){function a(a){var b=D[a];if(b){for(;0<b.length;)b.pop()();D[a]=null}}function b(a,c,d){var h=l[a];c.push(a);d[a]=!0;if(h&&0!==h.length){a=h.length;for(var f=0;f<a;f++){var k=h[f];d[k]||b(k,c,d)}}}function c(a,b,d){if(p._completed[b])return!0;var h=l[b];if(!h||0===h.length)return!0;for(var k=h.length,e=0;e<k;e++){b=h[e];if(!f.loader.async){if(b===a)return!1}else if(!f.getType(b))return d=b,r[d]||(r[d]=[]),r[d][r[d].length]=a,!1;if(!d[b]&&(d[b]=!0,!c(a,b,d)))return!1}return!0}function d(a){var b=
l[a];if(b){var d=b.length;if(f.loader.async)return c(a,a,{});for(var h=t,k=h.length,e=0;e<d;e++)for(var D=b[e],m=0;m<k;m++)if(h[m]===D)return!1;if(0<k)return c(a,a,{})}return!0}function h(b){a(b);k[b]&&(k[b].complete(),k[b]=null);var c=e[b];if(c)for(var d=c.length,h=0;h<d;h++){var l=c[h];l&&l.complete()}e[b]=null;m[b]=!0}var l={},k={},D={},t=[],e={},m={},r=[];return{addDep:function(a,b){if(a){if(!p._completed[b]){var c;c=l[a];c||(c=[],l[a]=c);c[c.length]=b}f.loader.async||(c=t,0==c.length&&c.push(a),
c[c.length-1]===a&&c.push(b))}},popDep:function(a,b){if(!f.loader.async){var c=t;c[c.length-1]===b&&c.pop()}},addInner:function(a,b){e[a]||(e[a]=[]);e[a].push(b)},deferNeed:function(a,b){var c=D;c[a]||(c[a]=[]);c[a].push(b)},processNeeds:function(b){a(b)},register:function(a,b){k[a]=b},load:function(a){if(!a||m[a])return!1;var c=l[a];if(!f.loader.async){var k=t,e=k.length;0<e&&k[e-1]===a&&k.pop()}e=!1;if(c&&d(a)){k=[];for(b(a,k,{});0<k.length;)e=k.pop(),p._completed[e]||h(e);e=!0}c&&0!=c.length||
h(a);a=r[a];if(!e&&a)for(c=0,e=a.length;c<e;c++)k=a[c],null!=k&&d(k)&&(h(k),a[c]=null);return!0}}}(),m={create:function(a,b){if(!0===N[a])throw"Invalid type name '"+a+"'";var c=function(){var a=p.getById(c.vj$._meta._metaId),b=!c.__donotconstruct;a._canDelayInit&&(a._canDelayInit=!1,a.endType());if(m.shouldAutoConstruct(this,c,a))return b=m.createNoConstruct(c),m.construct(b,arguments)||b;this.constructor=c;a&&!a._completed&&(a.complete(),w(c.prototype,function(a,b,c){this[b]=a},this));this.vj$=c.vj$;
a=this.vj$._vjType;if(b&&("itype"==a||"mtype"==a))throw a+" "+this.vj$._class+" cannot be instantiated";m.processInners(this,c.vj$,c.clazz);return b&&(b=m.construct(this,arguments))?b:null};c._name="base";c.vj$={_class:a,_meta:{}};c.isInstance=this.isInstanceFunc;return c},isInstanceFunc:function(a){return f.isInstanceOf(a,this)},shouldAutoConstruct:function(a,b,c){return!(a instanceof b)&&!b.__donotconstruct&&c&&c._options.autoConstruct},createNoConstruct:function(a){a.__donotconstruct=!0;var b=
new a;delete a.__donotconstruct;return b},needs:function(a,b){if(!a||this.vj$._meta._isInner)return this;var c=null,d=!1,h=1;if("string"==typeof a)c=[a],d=b?!0:!1;else if(a instanceof Array)c=a,h=c.length;else return this;for(var l=0;l<h;l++){var k=c[l],e=E[k],t=k.lastIndexOf("."),t=-1<t?k.substring(t+1):k,e=e?e.pkg[t]:null;C.addDep(this.vj$._class,k);e||(e=f.getType(k));C.popDep(this.vj$._class,k);m.addToNameSpace(this,e,k,t,b,d)}return this},needslib:function(){},addToNameSpace:function(a,b,c,d,
h,l){if(""!==h)if(b){if("mtype"!=this._vjType&&(!b.vj$||"mtype"!=b.vj$._vjType)){var k=l?h:d;c=!1;if(a.vj$[k]&&a.vj$[k]!==b)if(_bOldSupport)c=!0;else throw"Name collision with type '"+k+"' in need list.";c||(a.vj$[k]=b)}}else C.deferNeed(a.vj$._class,f.curry(function(a,b,c){if((b=f.getType(b))&&"mtype"!=b.vj$._vjType){if(c.vj$[a]&&c.vj$[a]!==b)throw"Name collision with "+k+"in need list.";c.vj$[a]=b}},l?h:d,c,a))},props:function(a,b){for(var c in a)if(!0!==L[c]){var d=a[c];if(this[c]=d)if(d.vj$){if(d.vj$._meta._isInner&&
m.addInner(this,d,"s_inners",c)){if(this.vj$[c])throw"'"+c+"' in type '"+this.vj$._class+"' conflicts with needed type name";var h=F(this.vj$,c,d);d.vj$=h;this.vj$._meta._isInner||(h=p.get(d))&&!h._name&&(C.addInner(this.vj$._class,h),h=this.vj$._class,m.updateInners(h,h+"."+c,d,!0))}}else A(d)&&!d._name&&(d._name=c)}a.toString!=Object.prototype.toString&&(this.toString=a.toString);return this},protosHandler:function(a,b){return function(){var c=this.base,d=!1,h,l=this.vj$.outer;m.setBase(this,b);
try{h=m.execRealFn(a,arguments,this,b,l)}catch(f){d=f}this.base=c;if(d)throw d;return h}},protos:function(a,b){if(a){for(var c in a)if("base"!==c){var d=a[c];if(d){var h=this.prototype[c],l=v(d);h&&m.isValidProto(c,d,h)&&!l?this.prototype[c]=m.protosHandler(d,this):(l&&d.vj$._meta._isInner&&!this.vj$._meta._isInner&&(h=p.getById(d.vj$._meta._metaId))&&!h._name&&(C.addInner(this.vj$._class,h),h=this.vj$._class,m.updateInners(h,h+"."+c,d,!1)),this.prototype[c]=d);if(l){if(d.vj$._meta._isInner&&m.addInner(this,
d,"_inners",c)&&this.vj$[c])throw"'"+c+"' in type '"+this.vj$._class+"' conflicts with needed type name";}else A(d)&&!d._name&&(d._name=c)}else this.prototype[c]=d}a.toString!=Object.prototype.toString&&(this.prototype.toString=a.toString);return this}},isValidProto:function(a,b,c){return A(c)&&0!=a.indexOf("constructs")&&(-1===a.indexOf("_ovld")||a.indexOf("_ovld")!=a.length-5)&&!v(c)&&A(b)},satisfies:function(a,b){var c=[],c=a instanceof Array?a:[a];w(c,function(a,c,l){a=z(a);var k;v(a)&&(k=a,c=
k.vj$._class||"",l=c.lastIndexOf("."),(c=-1<l?c.substring(l+1):c)&&(this.vj$[c]=k));if(k=k?k:f.getType(a)){b||this.clazz._satisfied.push(k);for(var e in k)a=k[e],!0===L[e]||this[e]||(this[e]=a)}},this);return this},inherits:function(a,b){if("vjo.Object"===a||a===f.Object)return b&&m.createInherits(this,f.Object),this;a=z(a);if(!b&&!0===S[a])throw"Cannot inherit from '"+a+"'";var c;if(v(a)){c=a;var d=c.vj$._class||"",h=d.lastIndexOf(".");(d=-1<h?d.substring(h+1):d)&&(this.vj$[d]=c)}else c=this.vj$[a]||
f.getType(a);v(c)&&((d=p.getById(c.vj$._meta._metaId))&&!d._completed&&d.complete(),m.createInherits(this,c));return this},setBase:function(a,b){a.base=b.prototype._getBase?b.prototype._getBase():null;a.base&&(a.base._parent=a)},createInherits:function(a,b){var c=this.createNoConstruct(b);c.constructs=null;c.constructor=a;if(b===f.Object)c.base=this.emptyFunc,a.prototype=c,c._getBase=this.selfFunc;else{var d=b.prototype,h={};h.vj$=b.vj$;d._getBase&&d._getBase()._constructs&&(h._constructs=!0);c.base=
function(){var a=this.base,c=b.prototype,d=c._getBase,h=c.constructs;c.base&&(this.base=c.base);h=h?h.toString():"";h=-1===h.indexOf("this.base(")&&-1===h.indexOf("this.constructs");d&&d()._constructs&&h&&this.base();if(c.constructs){d=this.vj$._meta._isInner;try{m.execRealFn(c.constructs,arguments,this,b,d)}catch(l){throw l;}}this.base=a};c._getBase=function(){return h};var l=f.Object.prototype,k;for(k in d)if("toString"!==k){var e=d[k],t=A(e);"constructs"===k&&t?0===e.length&&(h._constructs=!0):
!0!==T[k]&&(!t||e.vj$||l[k]===e||e instanceof RegExp?(v(e)&&e.vj$._meta._isInner&&(t=a.vj$._meta,t._inners||(t._inners={}),t._inners[k]=e),c[k]=e):(t=this.createBaseRef(b,e,a),h[k]=t,e.__isChained||(c[k]=this.hasBaseCall(e,k)?t:this.createChainedMethod(b,e),c[k].__isChained=!0)))}h.toString!=f.Object.prototype.toString&&(h.toString=this.createBaseRef(b,d.toString,a));a.prototype=c}},createChainedMethod:function(a,b){return function(){try{return"etype"===this.vj$._vjType?m.execRealFn(b,arguments,this,
a,!0):m.execRealFn(b,arguments,this,a)}catch(c){throw c;}}},emptyFunc:function(){},selfFunc:function(){return this},hasBaseCall:function(a,b){return-1!=a.toString().indexOf("this.base."+b+"(")},createBaseRef:function(a,b,c){return function(){var c=this._parent?this._parent:this,h,l=!1,f=c.base;m.setBase(c,a);try{h=m.execRealFn(b,arguments,c,a)}catch(e){l=e}c.base=f;if(l)throw l;return h}},updateInners:function(a,b,c,d){if(c&&c.vj$){var h=c.vj$,l=c.clazz;h._class=b;var f=b.lastIndexOf("."),f=b.substring(f+
1);h[f]=c;if(l&&a)if(0==b.indexOf(a)){for(var e=b.replace(a,"");-1<e.indexOf(".");)e=e.replace(".","$");l._name=a+e}else l._name=a+"$"+f;B(b,!0).pkg[f]=c;(c=d?h._meta.s_inners:h._meta._inners)&&w(c,function(c,f){w(h,function(a,b){!this[b]&&a&&a.vj$&&(this[b]=a)},c.vj$);var l=p.getById(c.vj$._meta._metaId);c.vj$&&l&&C.addInner(a,l);m.updateInners(a,b+"."+f,c,d)})}},addInner:function(a,b,c,d){if(!a||!b||!d)return!1;var h=b.vj$;return h?v(b)&&h._meta._isInner?(a=a.vj$,!h._class&&a._class&&(h=h._class=
a._class+"."+d,b.clazz&&(b.clazz._name=h,K[h]=b.clazz),B(h,!0).pkg[d]=b),c&&(a._meta[c]||(a._meta[c]={}),a._meta[c][d]=b),!0):!1:!1},execRealFn:function(a,b,c,d,h){var f=!1,e,m=c.vj$;h||(c.vj$=(c.base&&c.base.vj$&&d.vj$._class==c.base.vj$._class?c.base:d).vj$);try{e=a.apply(c,b)}catch(t){f=t}h||(c.vj$=m);if(f)throw f;return e},createClazz:function(a){var b=a.clazz,c=a.vj$._class;b&&b._name&&(c=b._name);a.clazz=f.Class.create(c,a.vj$._vjType);b&&(a.clazz._satisfied=b._satisfied);a.prototype?a.prototype.getClass=
J:a.getClass=J;a.vj$.type=a},canCallBase:function(a){var b=a.constructs.toString();return a.base&&-1===b.indexOf("this.base(")&&-1===b.indexOf("this.constructs")},tmpFunc:function(){},construct:function(a,b){var c=a.constructs,d,h,f=!1;a.base&&a._getBase&&(d=function(){},d.prototype=a._getBase(),f=d.prototype._constructs||!1);!f||c&&!this.canCallBase(a)||a.base();c&&(h=c.apply(a,b));d&&(a.base=new d,a.base._parent=a);if(h)return h},processInners:function(a,b,c){c=b?b._meta._inners:null;if(b&&c&&0!=
c.length&&a)for(var d in c)a[d]=f.curry(function(a,c,d){var f=a.vj$._class+"."+d,e=p.getById(c.vj$._meta._metaId);e&&e.complete();var e=m.createNoConstruct(c),r=F(b,d,c);e.vj$=r;e.vj$.outer=a;m.processInners(e,r,c.clazz);c.vj$._class=e.vj$._class=f;c.clazz&&!c.clazz._name?(c.clazz._name=e.vj$._class,K[f]=c.clazz):m.createClazz(c);m.construct(e,Array.prototype.slice.call(arguments,3));e.vj$.outer&&e.base.vj$&&(r=F(e.vj$),u(r,e.base.vj$),e.base.vj$=r);return e},a,c[d],d),a[d]._outer=a,a[d].vj$=c[d].vj$}},
M="undefined"!=typeof console;u(f,{sysout:{print:function(){M&&console.info.apply(this,arguments)},println:function(){M&&console.info.apply(this,arguments)},printStackTrace:function(){}},syserr:{print:function(){M&&console.warn.apply(this,arguments)},println:function(){M&&console.warn.apply(this,arguments)},printStackTrace:function(){}},jsunit:{assertEquals:function(){},assertTrue:function(){},assertFalse:function(){},assertNotNull:function(){}}});p.prototype={init:function(a){this._cfg={satisfiesFn:m.satisfies,
inheritsFn:m.inherits,protosFn:m.protos,postDefFn:m.tmpFunc,typeDef:null,baseType:"vjo.Object"};a&&u(this._cfg,a)},setup:function(){var a=this._name,b=this._type=this._cfg.typeDef||m.create(a,"itype"===this._kind);b.vj$._vjType=this._kind||"ctype";this._canDelayInit=!0;if(this._isInner)a=p.id(),b.vj$._meta._isInner=!0;else{var c="ftype"==this._kind?B(a,!1,f._hiddenTypes):B(a);c.pkg[c.className]||(c.pkg[c.className]=this._type);b.vj$[c.className]=b;C.register(a,this);this._isDup=null!=p.getById(a)}this._isDup||
p.put(this,a);b._inherits=null;m.createClazz(b);b.vj$._meta._metaId=a},needs:function(a,b){m.needs.apply(this._type,arguments);return this},options:function(a){if(a)for(var b in a)this._options[b]=a[b],"metatype"==b&&a[b]&&(this._isMetaType=!0);return this},satisfies:function(a){var b=[],b=a instanceof Array?a:[a];w(b,function(a,b,h){b=z(a);this.needs(b);m.needs.call(this._type,b);this._satisfies.push(a)},this);return this},props:function(a){this._canDelayInit=!1;if(this._props)throw"multiple props blocks are not allowed";
this._props=a;m.props.apply(this._type,arguments);return this},protos:function(a){if(this._protos)throw"multiple protos blocks are not allowed";this._protos=a;return this},inherits:function(a){var b=[],b=a instanceof Array?a:[a];w(b,function(a,b,h){b=z(a);this.needs(b);this._inherits.push(a)},this);return this},mixin:function(a){var b=[],b=a instanceof Array?a:[a];w(b,function(a,b,h){b=z(a);this.needs(b);this._mixins.push(a)},this);return this},inits:function(a){this._canDelayInit=!1;this._inits=
a;return this},globals:function(a,b){this._canDelayInit=!1;this._globals=a;this._scopeForGlobals=b;return this},validateAndMerge:function(a,b){var c=b?a[b]:a;return function(a,b,e){if(c[b])throw"collision when mixing in '"+b+"' into "+this._name;c[b]=a}},mergeMixins:function(a){for(var b=this._mixins,c=0;c<b.length;c++){var d=f.getType(b[c]);if(!d||!d.vj$||"mtype"!=d.vj$._vjType)throw b[c]+"is not a valid mtype.";var h=d._expects;sats=d._satisfiers;this._protos||(this._protos={});this._props||(this._props=
{});I(d.vj$,this._type.vj$);var e=d.vj$._class,k=e.lastIndexOf("."),e=-1!=k?e.substring(k+1):e;if(this._type.vj$[e])throw e+" is already defined in the current namespace";this._type.vj$[e]=this._type;w(d._protos,this.validateAndMerge(this,"_protos"),this);w(d._props,this.validateAndMerge(a,"_props"),this);for(d=0;d<sats.length;d++)this._satisfies.push(sats[c]);h&&this._expects.push(h)}},completeSatisfies:function(){0<this._satisfies.length&&this._cfg.satisfiesFn.call(this._type,this._satisfies);0<
this._expects.length&&this._cfg.satisfiesFn.call(this._type,this._expects,!0)},completeInherits:function(){var a=this._inherits.length;if(0<a){if("itype"!=this._kind&&1<a)throw"type can only inherit from one type";for(var b=0;b<a;b++)this._cfg.inheritsFn.call(this._type,this._inherits[b])}else"itype"!=this._kind&&this._cfg.inheritsFn.call(this._type,this._cfg.baseType,!0)},completeDef:function(){"ftype"!=this._kind&&this._protos&&this._cfg.protosFn.call(this._type,this._protos);this._cfg.postDefFn.call(this);
this._globals&&!this._isDup&&this.__initGbs(this._globals,this._scopeForGlobals);this._inits&&!this._isDup&&this._inits.call(this._type)},__initGbs:function(a,b){var c=b;if(void 0==c||null==c)c=O;w(a,function(a,b){if("undefined"!=typeof a){if(this[b]&&this[b]!==a)throw b+" is already defined in the current namespace";this[b]=a}},c)},complete:function(){if(this._completed)return this;this._completed=!0;p._completed[this._name]=!0;if("ftype"!=this._kind){H(this._type.vj$);if(0<this._mixins.length){var a=
{_props:{}};this.mergeMixins(a);m.props.call(this._type,a._props)}this.completeSatisfies();this.completeInherits()}this.completeDef();return this},typesAvail:function(a){for(var b=0;b<a.length;b++)if(!v(a[b]))return!1;return!0},canComplete:function(){var a=null==this._inits&&this.typesAvail(this._inherits);a&&(a=this.typesAvail(this._satisfies));a&&(a=this.typesAvail(this._mixins));return a},endType:function(){if(this._isMetaType)return y(this._name),this._type;if(this._isInner)this.canComplete()&&
this.complete();else{if(this._canDelayInit)return this._type;C.load(this._name);f.validateType&&f.validateType(this._type)}return this._type}};u(p,{_count:0,_pre:"tmp",_reg:{},_completed:{},id:function(){return this._pre+this._count++},put:function(a,b){var c=b?b:this._pre+this._count++;this._reg[c]=a},get:function(a){var b;return v(a)?this._reg[a.vj$._meta._metaId]:(b=f.getType(a))?this._reg[b.vj$._meta._metaId]:this._reg[a]},getById:function(a){return this._reg[a]}});f.ctype=function(a){a=z(a);
return new p(a)};f.itype=function(a){a=z(a);a=new p(a,"itype",{inheritsFn:function(a){if(a=this.vj$[a]?this.vj$[a]:this.vj$.b&&this.vj$.b[a]?this.vj$.b[a]:f.getType(a))for(var c in a){var d=a[c];!0===L[c]||this[c]||(this[c]=d)}return this}});a._type.isInstance=function(a){return f.isInstanceOf(a,this)};return a};f.ftype=function(a){a=z(a);return new p(a,"ftype",{postDefFn:function(){var a=this._type,c=a._invoke_;if(!A(c))throw"missing required method _invoke_ in ftype";delete c._name;this._type=function(){return function(){return e(c,
arguments)}}();for(var d in a)"_invoke_"!=d&&"prototype"!=d&&"undefined"!=d&&"isInstance"!=d&&"_inherits"!=d&&"clazz"!=d&&"_name"!=d&&(this._type[d]=a[d]);a=B(this._name,!0);a.pkg[a.className]=this._type;this._type.vj$[a.className]=this._type}})};f.mtype=function(a){a=z(a);var b=new x(a);if(!a||P(a))b.vj$._meta._isInner=!0;if(!a)return b;a=B(a);return a.pkg[a.className]?b:a.pkg[a.className]=b};f.etype=function(a){a=z(a);r();var b=function(a){this.vj$=b.vj$;if(0!=a){if(!this.constructs)throw"'"+this.vj$._class+
"' cannot be instantiated";this.constructs.apply(this,a)}};b.vj$={_class:a,_vjType:"etype",_meta:{}};b.isInstance=function(a){return f.isInstanceOf(a,this)};a=new p(a,"etype",{typeDef:b,baseType:"vjo.Enum",postDefFn:function(){this._type.prototype.toString=f.Enum.prototype.name;this._eVals&&this._type.values.call(this._type,this._eVals)}});u(a,{inherits:function(){throw"Invalid type definition. etype cannot be inheritted from another type";},values:function(a){this._eVals=a;return this}});var c=a._type;
c._enums=[];c.from=f.Enum.from;c._nativeValueOf=c.valueOf;c.valueOf=f.Enum.from;c.values=function(a){if(0==arguments.length){if(this._enums.slice)return this._enums.slice();for(var b=[],e=0;e<this._enums.length;e++)this._enums[e]&&(b[e]=this._enums[e]);return b}var f=0;if("string"==typeof a&&0<a.length){for(;-1<a.indexOf(" ");)a=a.replace(" ","");if(0<a.indexOf(",")){b=a.split(",");if(b[0]&&0<b[0].indexOf(":"))throw"Invalid labels for etype values: "+b[0];for(var e=0,m=b.length;e<m;e++){var r=b[e];
-1<b[e].indexOf(":")&&(r=b[e].split(":")[0]);this._enums[this._enums.length]=new c(!1);this._enums[this._enums.length-1]._name=r}}else this._enums[0]=new c(!1),this._enums[0]._name=a}else for(e in a)this._enums[this._enums.length]=new c(a[e]),this._enums[this._enums.length-1]._name=e;e=0;for(m=this._enums.length;e<m;e++)if(this._enums[e]){b=this._enums[e]._name;if(this[b])throw"Invalid prop member. Cannot use etype value as prop member.";this[b]=this._enums[e];this[b]._ord=f++}c.prototype.constructs=
null;return this};return a};f.otype=function(a){return{defs:function(a){return this},endType:function(){}}};var L={},T={},Q={},N={},S={};w("props protos inherits prototype inits satisfies mixin _inherits _satisfiers singleton isInstance vj$".split(" "),function(a,b,c){this[a]=!0},L);w(["constructs","getClass","_getBase","base","vj$"],function(a,b,c){this[a]=!0},T);w("props protos _props _protos vj$ _expects expects _satisfiers satisfies endType".split(" "),function(a,b,c){this[a]=!0},Q);w(["vjo.Class",
"vjo.Object"],function(a,b,c){this[a]=!0},N)}function P(f){function G(e,f){this.identifier=e;this.moduleCache=(this.parent=f)?f.moduleCache:{};this.scope=this.exports=this.source=this.url=null;this.loaded=!1}function p(e,f,p,v){this.name=e;this.resolver=f;this.fetcher=p;this.evaluator=v}function q(e){return"./"===e.slice(0,2)||"../"===e.slice(0,3)?!0:!1}var v=new G("root",null);v.scope=f;var x=function(e,f){return f?new G(e,f):new G(e,v)};p.prototype.getScope=function(e){return f};p.prototype.loadModule=
function(e){if(!e)throw Error("module is null");try{e.url||(e.url=this.resolver.resolve(e.identifier,e.parent.url));if(!e.url)return!1;e.source||(e.source=this.fetcher.fetch(e.url));if(!e.source)return!1;var r=this.getScope(e);r&&r!==f&&(e.scope=r);r.exports&&(e.exports=r.exports);this.evaluator.evaluate(e.identifier,e.source,r);return!0}catch(p){return!1}};_cacheMgr={getModule:function(e,f){return q(e)?null:f?f.moduleCache[e]:v.moduleCache[e]},addModule:function(e){q(e.identifier)||(e.parent.moduleCache[e.identifier]=
e)}};var B=function(){var e={};return{load:function(f,p){var q=p;q||(q=v);var u=_cacheMgr.getModule(f,q);if(u)return u.exports;u=x(f,q);for(n in e)if(e[n].loadModule(u))return _cacheMgr.addModule(u),u.exports;return null},addMgr:function(f){e[f.name]=f},getMgr:function(f){return e[f]}}}(),y={name:"VjetModuleMgmt",version:"1.0",addNativeModule:function(e,f){var p=x(e,v);p.exports=f;p.moduleCache[e]=p;p.loaded=!0},addModuleMgr:function(e){B.addMgr(e)},getModuleMgr:function(e){return B.getMgr(e)},setCacheMgr:function(e){_cacheMgr=
e},getDispatcher:function(){return B}};y.Module=G;y.ModuleManager=p;return y}if(q){var x=P(this),y={};I(y,this);x.addNativeModule("VJET",{vjo:y});var F=new x.ModuleManager("VJET");F.loadModule=function(f){try{return x.ModuleManager.prototype.loadModule.call(F,f)?(f.exports=y.getType(f.identifier,!0),!0):!1}catch(q){return!1}};x.addModuleMgr(F);y.loader={async:!0,load:function(f){return x.getDispatcher().load(f)}};q=new x.ModuleManager("CommonJS");_require=function(f,q){return x.getDispatcher().load(f,
q)};q.getScope=function(f){function q(f){return f?f.scope?f.scope:q(f.parent):null}var p={},x=q(f.parent);for(g in x)p[g]=x[g];p.module=f;p.require=function(p){return _require(p,f)};p.exports={};return p};x.addModuleMgr(q);this.require=function(f){return _require(f)};this.require.getModuleMgr=x.getModuleMgr;this.vjo=y}else{var y={},O="undefined"!=typeof window?window:this;q=O.vjo;if(!q||!q._v||q._v<VERSION)O.vjo=y;I(y,this)}}).call(this,!1);
